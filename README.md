# 起航旅游公司-耗材租赁收益管理系统



## 数据库



### 数据库-数据格式

int一律64长度

varchar一律255长度



### 数据库-表结构

#### 用户表

>  表名 :  employee

|   键名   |   解释   | 字段类型 |
| :------: | :------: | :------: |
|    id    |  自增id  |   int    |
|   name   |  用户名  | varchar  |
| password |   密码   | varchar  |
|  email   |   邮箱   | varchar  |
|  avatar  | 用户头像 | varchar  |
|  level   | 人事等级 |   int    |

> 字段备注

- level (人事等级)
  - 0 管理员
  - 1 人事管理人员
  - 2 采购管理人员
  - 3 仓库/订单 管理人员

> 备注

- 使用email数据校验 将验证码存入redis中
- 图片上传 可以选择上传到本地/图片服务器
- 用户名即是登录账号 又是 用户名
- token 使用uuid+邮箱  然后使用md5加密生成
- 密码使用md5加密

> 业务流程

- 各自的等级 只能对自己的模块进行增删改查 , 对其他模块 只有查看的权限

  



#### 租户信息表

>  表名 :  user

| 键名  |  解释  | 字段类型 |
| :---: | :----: | :------: |
|  id   | 自增id |   int    |
| name  | 用户名 | varchar  |
| phone | 手机号 | varchar  |





#### 库存物品种类表

>  表名 :  goodstype

|    键名    |   解释   | 字段类型 |
| :--------: | :------: | :------: |
|     id     |  自增id  |   int    |
|    name    | 种类描述 | varchar  |
| createtime | 创建时间 |   date   |





#### 库存信息表

>  表名 :  repertory

|    键名     |     解释     | 字段类型 |
| :---------: | :----------: | :------: |
|     id      |    自增id    |   int    |
|    name     |    货物名    | varchar  |
|    count    |   仓库数量   |   int    |
|    money    |   购入价格   |   int    |
| unitdeposit |  每/件 押金  |   int    |
|  unitprice  |  每/时 单价  |   int    |
|    type     | 库存物品种类 |   int    |





#### 租赁订单信息表

>  表名 :  lease

|    键名    |       解释       | 字段类型 |
| :--------: | :--------------: | :------: |
|     id     |      自增id      |   int    |
| leaseinfo  | 租赁信息(json串) | varchar  |
|    uid     |    租用用户id    |   int    |
| createtime |     开始时间     |   date   |
|  endtime   |     结束时间     |   date   |
|    type    |       押金       |   int    |
|    rent    |       租金       |   int    |
| breakinfo  | 损坏信息(json串) | varchar  |
|   status   |     订单信息     |   int    |







## 业务逻辑



### 租赁器具相关价格

1. 租金 : 自定 如果有损坏则直接扣除所有押金
2. 损坏 : 按照原价赔偿
3. 押金 : 进价的百分之五十



### 选择租赁用户

1. 查询所有用户,看看有无之前创建的用户,如果有直接选则即可
2. 如果没有则新建一个用户



### 租赁器具

1. 选择所需的租赁器具,并设置对应器具的租赁个数
2. 选择完毕之后,后台计算总押金金额并返回给用户
3. 确认租赁
4. 租赁后 在租赁表数量-租赁数量



### 归还器具

1. 点击归还按钮之后,设置订单情况为已归还
2. 检查器具是否损坏,如果有损坏,按照进价算
3. 计算结束时间-开始时间,计算对应的价格
   1. 因为计价单位为小时,如果超过的时间 **>** 20分钟,合并为一小时反之则不记
   2. 如果没有损坏
      1. 对应器具个数 ***** 对应器具每小时单价 **-** 押金 **=** 需要支付的钱
   3. 如果有损坏
      1. (没有损坏的对应器具个数 **x** 没有损坏的对应器具每小时单价) + (损坏的器具个数 **x** 损坏的器具原价) **-** 押金 **=** 需要支付的钱
4. 计算之后返回给前端 并确认付款
5. 确认之后再将 需要支付的钱 写入 租金列中
6. 归还完成
7. 归还后 在租赁表数量+归还数量



计算总交易金额

1. 因为有的订单会有损坏器具的出现
2. 所以纯利润计算方式为 列中租金收益 **-** (break表中对应器具*商品原价)





## 接口

### 〇 : 个人信息相关

#### 获取个人信息

> **1.请求方式**

| 选项         | 方案                |
| ------------ | :------------------ |
| **请求方法** | GET                 |
| **请求地址** | /api/myinfo/getinfo |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |

> **3.响应结果：JSON**

```json
{
	"msg":"验证码发送成功",
	"code":0,
	"data":{
            "id":1,
            "username":"mengban",
            "email":"2662252561@qq.com",
            "avatar":"avatar.jpg",
            "level":0
    }
}

{
	"msg":"未登录",
	"code":-1
}
```

#### 修改个人信息

> **1.请求方式**

| 选项         | 方案               |
| ------------ | :----------------- |
| **请求方法** | POST               |
| **请求地址** | /api/myinfo/update |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明                          |
| ------------ | ------ | -------- | ----------------------------- |
| **token**    | string | 是       | token                         |
| **username** | string | 是       | 为了配合token                 |
| **password** | string | 否       | 密码(如果不传 则保持原来不变) |
| **email**    | string | 是       | 邮箱                          |
| **level**    | string | 是       | 权限等级                      |

> **3.响应结果：JSON**

```json
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1
}
{
	"msg":"参数异常",
	"code":-2
}
```

#### 修改头像

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | x-www-form-urlencoded |
| **请求地址** | /api/myinfo/avatar    |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明                   |
| ------------ | ------ | -------- | ---------------------- |
| **token**    | string | 是       | token                  |
| **username** | string | 是       | 为了配合token          |
| **id**       | int    | 是       | 要修改头像的employeeid |
| **avatar**   | file   | 是       | 头像                   |

> **3.响应结果：JSON**

```json
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1
}
{
	"msg":"参数异常",
	"code":-2
}
```



### ① : 登录相关(已完成)

#### 发送验证码

> **1.请求方式**

| 选项         | 方案               |
| ------------ | :----------------- |
| **请求方法** | GET                |
| **请求地址** | /api/login/vertify |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |

> **3.响应结果：JSON**

```json
{
	"msg":"验证码发送成功",
	"code":0
}

{
	"msg":"账号或密码错误",
	"code":-1
}
```



#### 登录

> **1.请求方式**

| 选项         | 方案             |
| ------------ | :--------------- |
| **请求方法** | POST             |
| **请求地址** | /api/login/login |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明       |
| ------------ | ------ | -------- | ---------- |
| **username** | string | 是       | 登录的账号 |
| **password** | string | 是       | 登录的密码 |
| **code**     | String | 是       | 验证码     |

> **3.响应结果：JSON**

```json
{
	"msg":"登录成功",
	"code":0,
    "data":{
        "token":"19cb927f4b2a49109ebda555f8d46a0e",
        "employeename":"梦伴",
        "employeeavatar":"avatar.jpg"
    }
}

{
	"msg":"验证码失效或错误",
	"code":-1,
}

{
	"msg":"账号或密码错误",
	"code":-2,
}
```



### ② : 首页数据

#### 获取首页数据

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | GET                   |
| **请求地址** | /api/homepage/getinfo |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |

> **3.响应结果：JSON**

```json
{
	"msg":"请求成功",
	"code":0,
    "data":{
        "preview":{
            // 现在总订单(包括未完成和已完成)
            "lease":20,
            // 租赁用户数量
            "tenant":10,
            // 库存内现可租的总数量
            "repertory":99,
            // 库存内种类数量
            "repertorytype":5,
            // 正在租赁的商品个数
            "lease":20,
            // 纯利润
            "profit":9999
        },
        "echarts":[
            {"value": 1048, "name": "移动电源"},
            {"value": 735, "name": "自行车"},
            {"value": 580, "name": "潜水器具"},
            {"value": 484, "name": "旅游车"},
            {"value": 300, "name": "相机"}
        ]
    }
}

{
	"msg":"未登录",
	"code":-1,
}
```



### ③ : 租赁用户模块(已完成)

#### 获取所有租赁用户

> **1.请求方式**

| 选项         | 方案                 |
| ------------ | :------------------- |
| **请求方法** | GET                  |
| **请求地址** | /api/tenant/queryAll |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **page**     | Integer | 是       | 当前页        |
| **limit**    | Integer | 是       | 每页个数      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"请求成功",
	"code":0,
    "data":[
        {
            "id":1,
            "name":"mengban",
            "phone":15820392222
        },{
            "id":1,
            "name":"mengban",
            "phone":15820392222
        },{
            "id":1,
            "name":"mengban",
            "phone":15820392222
        }
    ],
    "count":123
}

{
	"msg":"未登录",
	"code":-1,
}

如果page或limit为空 则为默认值
默认值:
page:1
limit:10
```



#### 新增一个租赁用户

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | POST                  |
| **请求地址** | /api/tenant/insertOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明           |
| ------------ | ------ | -------- | -------------- |
| **token**    | string | 是       | token          |
| **username** | string | 是       | 为了配合token  |
| **name**     | string | 是       | 租赁用户名字   |
| **phone**    | string | 是       | 租赁用户手机号 |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"新增成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```



#### 修改一个租赁用户

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | POST                  |
| **请求地址** | /api/tenant/updateOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明           |
| ------------ | ------ | -------- | -------------- |
| **token**    | string | 是       | token          |
| **username** | string | 是       | 为了配合token  |
| **id**       | int    | 是       | 租赁用户id     |
| **name**     | string | 是       | 租赁用户名字   |
| **phone**    | string | 是       | 租赁用户手机号 |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  id/name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 删除一个租赁用户

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | POST                  |
| **请求地址** | /api/tenant/deleteOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |
| **id**       | string | 是       | 租赁用户id    |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"删除成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```



### ③ : 人事模块(已完成)

#### 获取所有人事

> **1.请求方式**

| 选项         | 方案                   |
| ------------ | :--------------------- |
| **请求方法** | GET                    |
| **请求地址** | /api/employee/queryAll |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **page**     | Integer | 是       | 当前页        |
| **limit**    | Integer | 是       | 每页个数      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"请求成功",
	"code":0,
    "data":[
        {
            "id":1,
            "username":"mengban",
            "password":"wushang816",
            "email":"2662252561@qq.com",
            "avatar":"avatar.jpg",
            "level":0,
        },{
            "id":1,
            "username":"mengban",
            "password":"wushang816",
            "email":"2662252561@qq.com",
            "avatar":"avatar.jpg",
            "level":0,
        },{
            "id":1,
            "username":"mengban",
            "password":"wushang816",
            "email":"2662252561@qq.com",
            "avatar":"avatar.jpg",
            "level":0,
        }
    ],
    "count":123
}

{
	"msg":"未登录",
	"code":-1,
}

如果page或limit为空 则为默认值
默认值:
page:1
limit:10
```



#### 新增一个人事

> **1.请求方式**

| 选项         | 方案                    |
| ------------ | :---------------------- |
| **请求方法** | POST                    |
| **请求地址** | /api/employee/insertOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明                        |
| ------------ | ------ | -------- | --------------------------- |
| **token**    | string | 是       | token                       |
| **username** | string | 是       | 为了配合token               |
| **name**     | string | 是       | 人事账号/用户名             |
| **password** | string | 是       | 密码                        |
| **email**    | string | 是       | 邮箱                        |
| **avatar**   | File   | 否       | 头像(有默认值,数据库设置的) |
| **level**    | string | 是       | 权限等级                    |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"新增成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  参数为空 或者 参数不符合规范
	"code":-2,
}
```



#### 修改一个人事

> **1.请求方式**

| 选项         | 方案                    |
| ------------ | :---------------------- |
| **请求方法** | POST                    |
| **请求地址** | /api/employee/updateOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明               |
| ------------ | ------ | -------- | ------------------ |
| **token**    | string | 是       | token              |
| **username** | string | 是       | 为了配合token      |
| **id**       | int    | 是       | 人事id             |
| **name**     | string | 是       | 人事账号/用户名    |
| **password** | string | 是       | 密码               |
| **email**    | string | 是       | 邮箱               |
| **avatar**   | File   | 否       | 头像(头像单独设置) |
| **level**    | string | 是       | 权限等级           |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  id/name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 删除一个人事

> **1.请求方式**

| 选项         | 方案                    |
| ------------ | :---------------------- |
| **请求方法** | POST                    |
| **请求地址** | /api/employee/deleteOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **id**       | integer | 是       | 人事id        |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"删除成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 修改头像(与个人信息中的 修改头像 相同)

> **1.请求方式**

| 选项         | 方案                  |
| ------------ | :-------------------- |
| **请求方法** | x-www-form-urlencoded |
| **请求地址** | /api/myinfo/avatar    |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明                   |
| ------------ | ------- | -------- | ---------------------- |
| **token**    | string  | 是       | token                  |
| **username** | string  | 是       | 为了配合token          |
| **id**       | integer | 是       | 要修改头像的employeeid |
| **avatar**   | file    | 是       | 头像                   |

> **3.响应结果：JSON**

```json
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1
}
{
	"msg":"参数异常",
	"code":-2
}
```

### ④ : 仓库种类表

#### 获取所有仓库种类

> **1.请求方式**

| 选项         | 方案                    |
| ------------ | :---------------------- |
| **请求方法** | GET                     |
| **请求地址** | /api/goodstype/queryAll |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **page**     | Integer | 是       | 当前页        |
| **limit**    | Integer | 是       | 每页个数      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"请求成功",
	"code":0,
    "data":[
        {
            "id":1,
            "name":"自行车",	
            "createtime":xxxxx//直接返回new Date()就可以
        }, {
            "id":1,
            "name":"自行车",	
            "createtime":xxxxx//直接返回new Date()就可以
        }, {
            "id":1,
            "name":"自行车",	
            "createtime":xxxxx//直接返回new Date()就可以
        },
    ],
    "count":123
}

{
	"msg":"未登录",
	"code":-1,
}

如果page或limit为空 则为默认值
默认值:
page:1
limit:10
```



#### 新增一个种类

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/goodstype/insertOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |
| **name**     | string | 是       | 种类名字      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"新增成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  参数为空 或者 参数不符合规范
	"code":-2,
}
```



#### 修改一个种类

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/goodstype/updateOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **id**       | integer | 是       | 种类id        |
| **name**     | string  | 是       | 种类名字      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  id/name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 删除一个仓库种类

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/goodstype/deleteOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **id**       | integer | 是       | 种类id        |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"删除成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```



### ⑤ : 仓库信息表

#### 获取所有仓库商品

> **1.请求方式**

| 选项         | 方案                    |
| ------------ | :---------------------- |
| **请求方法** | GET                     |
| **请求地址** | /api/repertory/queryAll |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **page**     | Integer | 是       | 当前页        |
| **limit**    | Integer | 是       | 每页个数      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"请求成功",
	"code":0,
    "data":[
        {
            "id":1,
            "name":"支付宝移动电源",
            "count":20,//现存可租数量
            "money":100,//进价
            "unitdeposit":40,//每件的租金
            "unitprice":2,//每小时的价格
            "type":{//种类对象
                "id":1,
                "name":"自行车",	
                "createtime":xxxxx//直接返回new Date()就可以
            }
        }, {
            "id":1,
            "name":"支付宝移动电源",
            "count":20,
            "money":100,
            "unitdeposit":40,
            "unitprice":2,
            "type":{
                "id":1,
                "name":"自行车",	
                "createtime":xxxxx//直接返回new Date()就可以
            }
        },
        {
            "id":1,
            "name":"支付宝移动电源",
            "count":20,
            "money":100,
            "unitdeposit":40,
            "unitprice":2,
            "type":{
                "id":1,
                "name":"自行车",	
                "createtime":xxxxx//直接返回new Date()就可以
            }
        },
    ],
    "count":5
}

{
	"msg":"未登录",
	"code":-1,
}

如果page或limit为空 则为默认值
默认值:
page:1
limit:10
```



#### 新增一个仓库商品

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/repertory/insertOne |

> **2.请求参数：单词参数和语种参数**

| 参数名          | 类型    | 是否必传 | 说明             |
| --------------- | ------- | -------- | ---------------- |
| **token**       | string  | 是       | token            |
| **username**    | string  | 是       | 为了配合token    |
| **name**        | string  | 是       | 商品名字         |
| **count**       | integer | 是       | 商品现存         |
| **money**       | integer | 是       | 商品进价         |
| **unitdeposit** | integer | 是       | 商品每件的押金   |
| **unitprice**   | integer | 是       | 商品每小时的租金 |
| **type**        | integer | 是       | 商品种类id       |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"新增成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  参数为空 或者 参数不符合规范
	"code":-2,
}
```



#### 修改一个仓库商品

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/repertory/updateOne |

> **2.请求参数：单词参数和语种参数**

| 参数名          | 类型    | 是否必传 | 说明             |
| --------------- | ------- | -------- | ---------------- |
| **token**       | string  | 是       | token            |
| **username**    | string  | 是       | 为了配合token    |
| **id**          | integer | 是       | 种类id           |
| **name**        | string  | 是       | 商品名字         |
| **count**       | integer | 是       | 商品现存         |
| **money**       | integer | 是       | 商品进价         |
| **unitdeposit** | integer | 是       | 商品每件的押金   |
| **unitprice**   | integer | 是       | 商品每小时的租金 |
| **type**        | integer | 是       | 商品种类id       |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  id/name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 删除一个仓库商品

> **1.请求方式**

| 选项         | 方案                     |
| ------------ | :----------------------- |
| **请求方法** | POST                     |
| **请求地址** | /api/repertory/deleteOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **id**       | integer | 是       | 种类id        |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"删除成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

### ⑥ : 租赁订单表(需要走索引)

#### 获取所有租赁订单信息

> **1.请求方式**

| 选项         | 方案                |
| ------------ | :------------------ |
| **请求方法** | GET                 |
| **请求地址** | /api/lease/queryAll |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型    | 是否必传 | 说明          |
| ------------ | ------- | -------- | ------------- |
| **token**    | string  | 是       | token         |
| **username** | string  | 是       | 为了配合token |
| **name**     | String  | 否       | 搜索条件      |
| **page**     | Integer | 是       | 当前页        |
| **limit**    | Integer | 是       | 每页个数      |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
    "msg": "请求成功",
    "code": 0,
    "data": [{
            "id": 1,
            "leaseinfo": [{
                "id": 1,
                "number": ["0017edcf7", "0017e511"]
            }, {
                "id": 2,
                "number": ["0028e2ab"]
            }, {
                "id": 3,
                "number": ["0037edcf7", "0037e511"]
            }, {
                "id": 4,
                "number": ["0047edcf7", "0047e511", "0047edcf7", "0047e511"]
            }, {
                "id": 5,
                "number": ["0057edcf7", "0057e511"]
            }],
            "user": {
                "id":1,
                "name":"mengban",
                "phone":15820392222
            },
            "createtime": "2021-06-01 16:09:41",
            "endtime": "2021-06-01 16:09:41",
            "deposit": 222,
            "rent":222,
            "breakinfo":[
                {
                    "id": 4,
                    "number": ["0047edcf7", "0047e511", "0047edcf7", "0047e511"]
                }
            ],
            "status":0
        }, {
            "id": 1,
            "leaseinfo": [{
                "id": 1,
                "number": ["0017edcf7", "0017e511"]
            }, {
                "id": 2,
                "number": ["0028e2ab"]
            }, {
                "id": 3,
                "number": ["0037edcf7", "0037e511"]
            }, {
                "id": 4,
                "number": ["0047edcf7", "0047e511", "0047edcf7", "0047e511"]
            }, {
                "id": 5,
                "number": ["0057edcf7", "0057e511"]
            }],
            "user": {
                "id":1,
                "name":"mengban",
                "phone":15820392222
            },
            "createtime": "2021-06-01 16:09:41",
            "endtime": "2021-06-01 16:09:41",
            "deposit": 222,
            "rent":222,
            "breakinfo":[
                {
                    "id": 4,
                    "number": ["0047edcf7", "0047e511", "0047edcf7", "0047e511"]
                }
            ],
            "status":0
        }
    ],
    "count": 5
}

{
    "msg": "未登录",
    "code": -1,
}

如果page或limit为空 则为默认值
默认值:
    page: 1
limit: 10
```



#### 新增一个订单信息

> **1.请求方式**

| 选项         | 方案                 |
| ------------ | :------------------- |
| **请求方法** | POST                 |
| **请求地址** | /api/lease/insertOne |

> **2.请求参数：单词参数和语种参数**

| 参数名        | 类型           | 是否必传 | 说明                 |
| ------------- | -------------- | -------- | -------------------- |
| **token**     | string         | 是       | token                |
| **username**  | string         | 是       | 为了配合token        |
| **leaseinfo** | String(Json串) | 是       | 租用情况信息(看备注) |
| **uid**       | integer        | 是       | 租户id               |

备注 :

~~~
leaseinfo  String(Json串)
但是需要在后台解析成List<对象>格式
然后解析里面参数 看是否合法
[{
	"id":1,
	"count":5
},{
	"id":1,
	"count":5
},]
~~~




> 3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"新增成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  参数为空 或者 参数不符合规范
	"code":-2,
}
```



#### 修改一个订单信息

> **1.请求方式**

| 选项         | 方案                 |
| ------------ | :------------------- |
| **请求方法** | POST                 |
| **请求地址** | /api/lease/updateOne |

> **2.请求参数：单词参数和语种参数**

| 参数名         | 类型                       | 是否必传 | 说明          |
| -------------- | -------------------------- | -------- | ------------- |
| **token**      | string                     | 是       | token         |
| **username**   | string                     | 是       | 为了配合token |
| **id**         | int                        | 是       | 订单id        |
| **leaseinfo**  | String(Json串)             | 是       | 订单租用信息  |
| **uid**        |                            | 是       | 订单租用信息  |
| **createtime** | String                     | 是       | 订单创建时间  |
| **endtime**    | String                     | 是       | 订单租用信息  |
| **deposit**    | Integer                    | 是       | 订单租用信息  |
| **rent**       | Integer                    | 是       | 订单租用信息  |
| **breakinfo**  | String(Json串) 同leaseinfo | 是       | 订单租用信息  |
| **status**     | Integer                    | 是       | 订单状态      |

备注 :

~~~
createtime,endtime 前台传String
后台解析成date对象
然后计算时间
再重新计算租金等


leases,breakinfo  String(Json串)
但是需要在后台解析成List<对象>格式
然后解析里面参数 看是否合法
[{
	"id":1,
	"count":5
},{
	"id":1,
	"count":5
},]
~~~

> 3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"修改成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  id/name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

#### 删除一个订单信息

> **1.请求方式**

| 选项         | 方案                 |
| ------------ | :------------------- |
| **请求方法** | POST                 |
| **请求地址** | /api/lease/deleteOne |

> **2.请求参数：单词参数和语种参数**

| 参数名       | 类型   | 是否必传 | 说明          |
| ------------ | ------ | -------- | ------------- |
| **token**    | string | 是       | token         |
| **username** | string | 是       | 为了配合token |
| **id**       | string | 是       | 订单id        |

> **3.响应结果：JSON**

```json
//符合layui规范的
{
	"msg":"删除成功",
	"code":0,
}

{
	"msg":"未登录",
	"code":-1,
}

{
	"msg":"参数异常", //  name/phone为空 或者 参数不符合规范
	"code":-2,
}
```

